<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/index.xhtml">

	<ui:define name="nome_pagina">
		<h1>
			<STRONG>Consulta de Categoria de Chamado</STRONG>
		</h1>
	</ui:define>

	<ui:define name="botoes">
		<div class="pull-right box-tools">
			<p:commandButton styleClass="btn-block btn-primary"
				value="#{msg['novo']}" action="#{categoriaBean.showFormNovo}" />
		</div>
	</ui:define>
	
	<ui:define name="corpo">
		
		<p:dialog 
			header="Ordem de Serviço Padrao"
			id="ordemServicoPadraoDialog" 
			widgetVar="ordemServicoPadraoDialog" 
			modal="true">
			
			<div class="box-body">
				
				<h:panelGroup id="idpanel">
					<div class="col-md-12">
					
					<div class="form-group">
					<div class="pull-right box-tools">
						<p:commandButton class="btn btn-warning btn-md" value="Buscar" process="ordemServicoPadraoDialog" rendered = "#{categoriaBean.flagNovoOrdemServicoPadrao == false}"/>
						
						<p:spacer width="10" />
						
						<p:commandButton class="btn btn-primary btn-md" value="Novo"  action="#{categoriaBean.showNovo}" update="idpanel" rendered = "#{categoriaBean.flagNovoOrdemServicoPadrao == false}"/>
						
						<p:commandButton class="btn btn-success btn-md" value="Salvar"  action="#{categoriaBean.salvarOrdemServicePadrao}" update="idpanel" rendered = "#{categoriaBean.flagNovoOrdemServicoPadrao}" />
						
					</div>
				</div>
				
					<ui:fragment rendered="#{categoriaBean.flagNovoOrdemServicoPadrao == false}" >
					<div class="form-group">
						<label for="exampleInputEmail1">Nome</label>
						<p:inputText maxlength="45" styleClass="form-control" label="#{msg['grupo.nome']}" id="nomeBusca" />
					</div>
				</ui:fragment>
					<p:dataTable 
						id="conteudo"
						rendered="#{categoriaBean.flagNovoOrdemServicoPadrao == false}"
						rows="5" 
						var="categoria"
						paginator="true" 
						value="#{categoriaBean.ordemServicoPadraoList}"
				 		paginatorAlwaysVisible="false"
						emptyMessage="#{msg['lista.vazia']}"
						style="max-width: 550px; min-width: 550px">

						<p:column  headerText="Nome">
	                        #{categoria.titulo}
	                	</p:column>
	                	
	                	
						<p:column  headerText="Descrição">
	                        #{categoria.descricao}
	                	</p:column>

						<p:column 
							width="20%" 
							styleClass="align-center"
							headerText="#{msg['acao']}">
							
							<p:commandButton icon="ui-icon-trash" title="#{msg['excluir']}"
								class="btn btn-danger btn-xs"
								actionListener="#{permissaoBean.remover(permissao)}" >
								<p:confirm header="Excluir Permissão"
									message="Deseja excluir o registro em definitivo?"
									icon="ui-icon-alert" />
							</p:commandButton>
						</p:column>




				</p:dataTable>
			
				
				<ui:fragment rendered = "#{categoriaBean.flagNovoOrdemServicoPadrao}">
				<br/>
					<div class="row">
						<div class="col-md-6">
							<div class="form-group">
								<label for="exampleInputEmail1">Título</label>
								<p:inputText maxlength="45" styleClass="form-control" label="#{msg['grupo.nome']}" id="titulo" value="#{categoriaBean.ordemServicoPadrao.titulo}" />
							</div>
						</div>
						
						<div class="col-md-6">
							<div class="form-group">	
								<label for="exampleInputEmail1">Motivo</label>
								<p:inputText maxlength="45" styleClass="form-control" label="#{msg['grupo.nome']}" id="motivo" value="#{categoriaBean.ordemServicoPadrao.motivo}" />
							</div>
						</div>
					</div>
					
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<label for="exampleInputEmail1">Descrição</label>
								<p:inputTextarea  styleClass="form-control" label="#{msg['grupo.nome']}" id="descricao" value="#{categoriaBean.ordemServicoPadrao.descricao}" />
							</div>
						</div>
					
					</div>
				
				</ui:fragment>
			</div>
				</h:panelGroup>
			</div>
		</p:dialog>
		
		<ui:fragment>
			<div class="box box-widget collapsed-box">

				<div class="box-header with-border">
					<div class="user-block">
						<ul class="sidebar-menu">
							<li class="active"><i class="fa fa-search"></i> <label><b>#{msg['filtros']}</b></label></li>
						</ul>
					</div>

					<!-- /.user-block -->
					<div class="box-tools">
						<button type="button" class="btn btn-box-tool"
							data-widget="collapse">
							<i class="fa fa-plus"></i>
						</button>

					</div>

					<!-- /.box-tools -->
				</div>

				<!-- /.box-header -->
				<div class="box-body">
					<div class="pull-right">

						<p:commandButton update="@form" value="#{msg['limpar']}"
							class="btn btn-danger btn-xs" action="#{permissaoBean.listar}">
							<f:setPropertyActionListener target="#{permissaoBean.pesquisa}"
								value="" />
						</p:commandButton>


						<p:commandButton class="btn btn-primary btn-xs"
							 value="#{msg['filtrar']}"
							action="#{permissaoBean.listar}" />
						<br />
					</div>

					<div class="row">

						<!-- DIV DA Coluna -->
						<div class="col-md-6">
							<!-- DIV DO ELEMTNO -->
							<div class="form-group">
								<label><b>#{msg['pesquisa']}</b></label>
								<p:inputText id="pesquisa" maxlength="100"
									styleClass="form-control" label="#{msg['descricao']}"
									value="#{permissaoBean.pesquisa}" />
							</div>
						</div>

					</div>

				</div>
			</div>

			<p:dataTable id="tbCategoria" rows="7" var="categoria"
				paginator="true" value="#{categoriaBean.categoriaList}"
				paginatorPosition="bottom" paginatorAlwaysVisible="false"
				emptyMessage="#{msg['lista.vazia']}">

				<p:column headerText="#{msg['permissao.nome']}"
					styleClass="align-center">
	                        #{categoria.nome}
	                    </p:column>

				<p:column width="60%" styleClass="align-center"
					headerText="#{msg['permissao.descricao']}">
	                        #{categoria.descricao}
	                    </p:column>

				<p:column width="15%" styleClass="align-center"
					headerText="#{msg['acao']}">
					
					<p:commandButton 
						icon="ui-icon-plus" 
						title="#{msg['editar']}"
						class="btn btn-warning btn-xs"
						action="#{categoriaBean.selecionaCategoria(categoria)}"
						oncomplete="PF('ordemServicoPadraoDialog').show();"
						 />


					<p:spacer width="10" />
					
					<p:commandButton icon="ui-icon-pencil" title="#{msg['editar']}"
						class="btn btn-primary btn-xs"
						action="#{permissaoBean.showFormEditar(permissao.id)}"
						 />

					<p:spacer width="10" />

					<p:commandButton icon="ui-icon-trash" title="#{msg['excluir']}"
						class="btn btn-danger btn-xs"
						actionListener="#{permissaoBean.remover(permissao)}"
						>
						<p:confirm header="Excluir Permissão"
							message="Deseja excluir o registro em definitivo?"
							icon="ui-icon-alert" />
					</p:commandButton>
				</p:column>


				<f:facet name="footer">
					<h:outputText
						value="#{msg['lista.totalRegistros']} #{categoriaBean.categoriaList.size()}" />
				</f:facet>

			</p:dataTable>
		</ui:fragment>
	</ui:define>

</ui:composition>

</html>